@page "/ShowPost/{Id:int}"
@using Entities.Models
@using Entities.Interfaces

@inject IPostDao _postDao
@inject NavigationManager _navMgr


<PageTitle>Post : @_shownPost</PageTitle>

<div class="box">
    
    @if (!string.IsNullOrEmpty(_errorLabel))
    {
        <label>@_errorLabel</label>
    }

    else
    {
        <h3>@_shownPost.Header</h3>
        <h5>Author: @_shownPost.Author.UserName</h5>
        <p>
            @_shownPost.Body
        </p>
    }
    
</div>


@code {
    [Parameter]
    public int Id { get; set; }

    private Post _shownPost = null!;
    private string _errorLabel = String.Empty;
    
    protected override async Task OnInitializedAsync()
    {
        try
        {
            _shownPost = await _postDao.GetById(Id);
        }
        catch (Exception e)
        {
            _errorLabel = e.Message;
        }
        
    }
}